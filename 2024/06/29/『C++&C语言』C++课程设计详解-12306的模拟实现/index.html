

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/Mine.jpg">
  <link rel="icon" href="/img/Mine.jpg">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Chiam">
  <meta name="keywords" content="Algorithms，Cybersecurity">
  
    <meta name="description" content="『C++&amp;C 语言』C++课程设计详解-12306 的模拟实现C++课程设计详解-12306 的模拟实现目录 设计思路… 3 思路分析：…. 3 数据组织：…. 4 具体功能实现过程… 4 管理端具体功能实现：…. 4 用户端具体功能实现：…. 5 调试截图和调试过程中遇到的问题及改进：… 12 时间类…. 12 站台类…. 14 列车站点类…. 16 列车类…. 17 车票类…. 19">
<meta property="og:type" content="article">
<meta property="og:title" content="『C++&amp;C语言』C++课程设计详解-12306的模拟实现">
<meta property="og:url" content="https://chiamzhang.github.io/2024/06/29/%E3%80%8EC++&C%E8%AF%AD%E8%A8%80%E3%80%8FC++%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1%E8%AF%A6%E8%A7%A3-12306%E7%9A%84%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0/index.html">
<meta property="og:site_name" content="Homepage of Chiam">
<meta property="og:description" content="『C++&amp;C 语言』C++课程设计详解-12306 的模拟实现C++课程设计详解-12306 的模拟实现目录 设计思路… 3 思路分析：…. 3 数据组织：…. 4 具体功能实现过程… 4 管理端具体功能实现：…. 4 用户端具体功能实现：…. 5 调试截图和调试过程中遇到的问题及改进：… 12 时间类…. 12 站台类…. 14 列车站点类…. 16 列车类…. 17 车票类…. 19">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200327202609118.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzYyNzExOA==,size_16,color_FFFFFF,t_70">
<meta property="article:published_time" content="2024-06-29T13:16:53.725Z">
<meta property="article:modified_time" content="2023-12-05T16:17:39.872Z">
<meta property="article:author" content="Chiam">
<meta property="article:tag" content="Algorithms，Cybersecurity">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://img-blog.csdnimg.cn/20200327202609118.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzYyNzExOA==,size_16,color_FFFFFF,t_70">
  
  
  
  <title>『C++&amp;C语言』C++课程设计详解-12306的模拟实现 - Homepage of Chiam</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  



  
<link rel="stylesheet" href="/css/custom.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"chiamzhang.github.io","root":"/","version":"1.9.5-a","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":"❡"},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":2},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.3.0"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>


<body>
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Chiam&#39;s Blogs</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                
                <span>Home</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                
                <span>Archives</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                
                <span>Categories</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                
                <span>About</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                
                <span>Links</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="『C++&amp;C语言』C++课程设计详解-12306的模拟实现"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-06-29 21:16" pubdate>
          June 29, 2024 pm
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          44k words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          366 mins
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">『C++&amp;C语言』C++课程设计详解-12306的模拟实现</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="『C-C-语言』C-课程设计详解-12306-的模拟实现"><a href="#『C-C-语言』C-课程设计详解-12306-的模拟实现" class="headerlink" title="『C++&amp;C 语言』C++课程设计详解-12306 的模拟实现"></a>『C++&amp;C 语言』C++课程设计详解-12306 的模拟实现</h1><h1 id="C-课程设计详解-12306-的模拟实现"><a href="#C-课程设计详解-12306-的模拟实现" class="headerlink" title="C++课程设计详解-12306 的模拟实现"></a>C++课程设计详解-12306 的模拟实现</h1><p><strong>目录</strong></p>
<p>设计思路… 3</p>
<p>思路分析：…. 3</p>
<p>数据组织：…. 4</p>
<p>具体功能实现过程… 4</p>
<p>管理端具体功能实现：…. 4</p>
<p>用户端具体功能实现：…. 5</p>
<p>调试截图和调试过程中遇到的问题及改进：… 12</p>
<p>时间类…. 12</p>
<p>站台类…. 14</p>
<p>列车站点类…. 16</p>
<p>列车类…. 17</p>
<p>车票类…. 19</p>
<p>用户数据类…. 21</p>
<p>查询类：…. 22</p>
<p>管理端…. 28</p>
<p>设计体会与小结… 29</p>
<h2 id="设计思路"><a href="#设计思路" class="headerlink" title="设计思路"></a>设计思路</h2><p>设计一个系统，首先要考虑实现什么功能，需要怎样组织数据。所以先通过查询 12306，知道了 12306 最终要实现：</p>
<p><img src="https://img-blog.csdnimg.cn/20200327202609118.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzYyNzExOA==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" lazyload></p>
<p>其次在分析实现方式，或者说自己以什么方式实现：</p>
<h3 id="思路分析："><a href="#思路分析：" class="headerlink" title="思路分析："></a>思路分析：</h3><p>站台中不能存车次的所有信息，那样就会站台包括车次，车次包括站台，循环定义，空间无限大，编译应该是不通过，利用车次与车站名是唯一的，所以站台与列车信息种只存彼此的名字即可。而对于车票，因为一个月最多有 31 天，开一个 31 天的 int 储存，这样今天 20 号，那么输入 11 号的话绝对是下个月的，因为不可能买今天之前的票，21 号的话绝对是这个月的 21 号，因为最多买后 30 天的票。余票的话，因为车站发售的票，不一定是实际可乘坐的余票，所以在每个站台存车次的余票为该站台最多可发售的余票，而火车种存有每个站台实际可卖的余票，乘车区间的火车实际余票最小值与该站台最多发售余票取最小值即为该乘车区间可发售的余票。</p>
<p>在在个系统中一定会有时间，应写一个时间类，时间类包括年月日时分，get&#x2F;set 函数，通过两个时间类计算停靠时间，这里会发现，任何一辆高铁夜间都是不行车的，所以不会出现跨天的可能，其实也不会出现超过一小时的，所以返回分钟即可。因为要存日志文件，所以要判断记录中的出行时间是否小于当前时间，要是小于就代表已经出行，需要生成日志文件，而不继续存在文件的数据中，这里用了流对象的储存文件名参数可以为一个 string 变量，可以自定义。最后便于从文件中读取数据，重载了&gt;&gt;与&lt;&lt;运算符。</p>
<p>详细的站台数据应该包括站台名，站台包括的车次及余票，也应该包括某辆车到该站点的时间信息等，将站台分为两个类，第一个是时间得站台包括车次信息，另一个是组合于列车类的站台信息包括时间参数等及其打印函数。</p>
<p>为了能够生成记录，以及查询已购的票，设置了一个车票类或称 record 类，包括车站、车次信息，出发、到达时间，购票人的身份证，同一张车票将人车于站台全部联系起来，为了使车票有自己唯一的编号，通过一个生成名字的函数，基于车次身份证出发时间生成，这样生成的车票名确定且唯一。</p>
<p>用户信息类，用户需要验证身份信息，所以必须需要一个类来储存身份信息，应该包括登陆账号手机号，身份证号，姓名，密码，是否为黑名单，已买到的票可以通过向量保存，储存车票名即可。也许打印身份信息函数，修改手机号函数，改密码函数。</p>
<h3 id="数据组织："><a href="#数据组织：" class="headerlink" title="数据组织："></a>数据组织：</h3><p>通过前面的实现思路，数据组织方式也很明确，数据类共计 6 个分别是 ① 时间类、② 站台类、③ 列车站点类、④ 列车类、⑤ 车票类、⑥ 用户数据类。所有数据类都重载类输入输出运算符。操作了类共计 3 个分别是 ① 查询类、② 用户端类、③ 管理端类。</p>
<h2 id="具体功能实现过程"><a href="#具体功能实现过程" class="headerlink" title="具体功能实现过程"></a>具体功能实现过程</h2><h3 id="管理端具体功能实现："><a href="#管理端具体功能实现：" class="headerlink" title="管理端具体功能实现："></a>管理端具体功能实现：</h3><p>增删查改站点：</p>
<p>查，可以继承用户端，用户的操作的管理员的都能做，除了买票退票，但是除此之外的所有有功能在管理端都可以进行于是用户端继承查询类，而修改站点可以简化为新建一个站点，删除旧站点。</p>
<p>增删查改车次：</p>
<p>查也可以继承，增可以写创建函数，删写删除函数，在列车数据 vector 中遍历查找要删除的车次，进行实删。</p>
<h3 id="用户端具体功能实现："><a href="#用户端具体功能实现：" class="headerlink" title="用户端具体功能实现："></a>用户端具体功能实现：</h3><p>查车票：</p>
<p>查询票需要三个参数，初始站，目的站，乘车日期，此时系统会打印那天所有经过两个站点的车次信息，是否有票无票都会打印，实现方法，将起始站经过的所有车次于目的站所经过车次对比，相同的保留，可以通过 set 将车次名放入，车次名在我国意一一对应车次，当放不进 set 去之后，用 vector 保存，则 vector 中的 存储车次为可到达车次。通过遍历取最小值获得余票，通过数据里的打印函数打印列车信息。</p>
<pre><code class="hljs">         bool Baseque :: cxyp(string a,string b,int riqi)

&#123;

    auto w=station[natosta[a]].quecheci();

    auto v=station[natosta[b]].quecheci(); //vector&lt;pair&lt;string,int&gt;&gt; checi

    set&lt;piao&gt;tem;

    vector&lt;piao&gt;temp;

    temp.clear();

    for(auto po=w.begin();po!=w.end();po++) tem.insert(*po);

    for(auto po=v.begin();po!=v.end();po++)

    &#123;

        if(tem.insert(*po).second==0) temp.push_back(*po);

    &#125;

    if(temp.size()==0)

    &#123;

        cout&lt;&lt;&quot;No ticket&quot;&lt;&lt;endl;

        return 0 ;

&#125;

int  Train::cxyp(string  a,string  b,int c)

&#123;

    bool flag=0;

    int mini=0x3f3f3f3f;

    for(auto po=station.begin();po!=station.end();po++)

    &#123;

        if(po-&gt;getsta()==a) flag=true;

        if(flag) mini=min(mini,po-&gt;getpiao(c));

        if(po-&gt;getsta()==b) break;

    &#125;

    return mini;

&#125;
</code></pre>
<p>车站车次查询：</p>
<p>应该有三个参数出发时间段，到达时间段，车站。此时系统会打印，在出发时段或到达时段通过该站点的车次，通过基类的 get 函数，获得经过该站点的车次名称，在操作类中找到对应的车次信息，判断他出发时间和到达时间，符合要求打印车次信息。</p>
<pre><code class="hljs">void Baseque ::czcc(string a,int b,int d)

&#123;

    vector&lt;piao&gt;w=station[natosta[a]].quecheci();

    for(auto po=w.begin();po!=w.end();po++)

    &#123;

       vector&lt;Zt&gt; q= train[checitotrain[po-&gt;name]].getzt();

       for(auto pi=q.begin();pi!=q.end();pi++)

       &#123;

            if(a==pi-&gt;getsta())

             &#123;

                 if(pi-&gt;getarr()==b||b==0||pi-&gt;getlea()==d||d==0)

                 &#123;

                      cout&lt;&lt;po-&gt;name&lt;&lt;endl;

                     if(pi!=q.begin())

                     &#123;

                            q.begin()-&gt;printl();

                            if(pi==q.end()-1)

                            &#123;

                                (q.end()-1)-&gt;printa();

                               //cout&lt;&lt;2&lt;&lt;endl;

                                    cout&lt;&lt;endl;

                            &#125;

                            else

                            &#123;

                                pi-&gt;print();

                                  //   cout&lt;&lt;endl;

                                (q.end()-1)-&gt;printa();

                               //  cout&lt;&lt;3&lt;&lt;endl;

                            &#125;

                             cout&lt;&lt;endl;

                     &#125;

                     else

                     &#123;

                             q.begin()-&gt;printl();

                             (q.end()-1)-&gt;printa();

                             cout&lt;&lt;endl;

                     &#125;

                     cout&lt;&lt;endl;

                 &#125;

             &#125;

       &#125;

    &#125;

&#125;
</code></pre>
<p>车次查询：</p>
<p>应该有一个参数，车次名，车次每天的都是重复的一样的，所以只输入车次名即可，输入车次名得到对应的车次的数据进而借助的列车的 print 函数打印列车的详细信息。</p>
<pre><code class="hljs"> void Baseque ::cxcx(string a)  //车次查询

&#123;

    if(checitotrain.find(a)==checitotrain.end())

    &#123;

        cout&lt;&lt;&quot;NO Train&quot;&lt;&lt;endl;

        return ;

    &#125; //查不到不打印

    vector&lt;Zt&gt; w=train[checitotrain[a]].getzt();

    for(auto po=w.begin();po!=w.end();po++)

    &#123;

        cout&lt;&lt;station[natosta[po-&gt;getsta()]].getname()&lt;&lt;&#39; &#39;;

        if(po!=w.begin()&amp;&amp;po!=w.end()-1)

        &#123;

            po-&gt;print();

           //cout&lt;&lt; po-&gt;getleave().first&lt;&lt;&#39; &#39;&lt;&lt;po-&gt;getleave().first;

        &#125;

          else if(po==w.begin())

          &#123;

               cout&lt;&lt; po-&gt;getleave().first&lt;&lt;&#39; &#39;&lt;&lt;po-&gt;getleave().first;

          &#125;

          else   cout&lt;&lt;po-&gt;getarrive().first&lt;&lt;&#39; &#39;&lt;&lt; po-&gt;getarrive().second&lt;&lt;&#39; &#39;;

    &#125;

    cout&lt;&lt;endl;

&#125;
</code></pre>
<p>购票:</p>
<p>购票需要传四个参数，但是在查询中已经输入了三个参数，所以只用再选择车次即可购票。购票为对某个乘车区间内的要出发那天车票进行自减操作，除此之外还要对起始站站台内这个车次的那一天的余票也要减 1；实现方式调用站台类的函数，跟火车类的函数，通过遍历对火车的区间操作。此外要注意，是否为黑名单，是否为买的票超过了 5 张。</p>
<pre><code class="hljs">bool Client::buytic(string a,string b,int c) //先查后买，查不到不能买。

&#123;

    if(!(cxyp(a,b,c)))&#123;cout&lt;&lt;&quot;无票&quot;&lt;&lt;endl;return 0;&#125;

    if(user[now].getboupiao()&gt;5||user[now].getban())

    &#123;

        cout&lt;&lt;&quot;购票限制&quot;&lt;&lt;endl;

        return 0;

    &#125;

   else

    &#123;

        string id;

        cin&gt;&gt;id;

        pair&lt;int,int&gt;www=train[checitotrain[id]].buytic(a,b,c);

        station[natosta[a]].buytic(a,c);

        Time no1,no2;

        no1.loadtime();

        no2.loadtime();

        no2.seth(www.first,www.second);

        if(no2.getday()&lt;c) no2.setmonth(no2.getmonth()+1);

        Tick tem(no1,no2,a,b,now2,id);

        tick.push_back(tem);

        hashtotick.insert(make_pair(tem.getname(),tick.size()-1));

        user[now].buytic(tem.getname());

    &#125;

    return 1;

&#125;
</code></pre>
<p>退票：</p>
<p>退票需要先查询自己买到了什么票，然后在进行选择要推动票，实现方式与买票实现方式相同(某个区间的票+1) ，火车开了之后，不能退票，但是可以改签。</p>
<pre><code class="hljs">void Client::reback() //先查后买，查不到不能买。

&#123;

  printmp();

 string id=now2;

 int n;

 cout&lt;&lt;&quot;退哪一张票&quot;&lt;&lt;endl;

 cin&gt;&gt;n;

 n=n-1;

 auto ww=user[now].gettic();

 string a=tick[ hashtotick[ww[n]]].getfrom();

 string b=tick[ hashtotick[ww[n]]].getto();

 int c=tick[ hashtotick[ww[n]]].getlea().getday();

 train[checitotrain[id]].reback(a,b,c);

 string e=tick[ hashtotick[ww[n]]].getna();

 station[natosta[a]].rebac(e,c);

  // tick.erase(hashtotick[ww[n]]+tick.begin());

&#125;                         
</code></pre>
<p>改签：</p>
<p>相当于退票+重新购票，不过改签的关键为能否找到合适的票进行改签，如果没找到要改签的的票，这样的改签无意义，所以相当于先购票后买票，购票失败等于改签失败，所以购票的返回值为 bool 类型，购票成功返回 1 否则返回 0。</p>
<pre><code class="hljs">void Client::replacetic()

&#123;

    string a,b,id;

    int c;

    cin&gt;&gt;a&gt;&gt;b&gt;&gt;c;

  if(  buytic(a,b,c))

   &#123;

        cin&gt;&gt;a&gt;&gt;b&gt;&gt;c;

        reback();

   &#125;

&#125;
</code></pre>
<p>换乘：</p>
<p>两个城市不能接联通，需要借助最短路，需要找出中转城市，但是鉴于京沪线的所有站点都有车次经过，且换乘实现有难度，不考虑这个功能。</p>
<p>查询修改个人信息：</p>
<p>通过写一个用户信息类，一方面用于信息查询，另一方面用于登陆。这样再通过用户信息类的打印函数，即可完成身份信息的查询。</p>
<pre><code class="hljs">                     void Client::printmp()

                    &#123;

                        auto ww=user[now].gettic();

                          if(ww.size()==0)return ;

                        for(auto po=ww.begin();po!=ww.end();po++)

                        &#123;

                           cout&lt;&lt;po-ww.begin()+1&lt;&lt;endl;

                            tick[ hashtotick[*po]].print();

                        &#125;

                    &#125;
</code></pre>
<p>列车、站台数据文件读写：</p>
<pre><code class="hljs">void Baseque::load()

&#123;

     int x,y,n;

    ifstream in1(&quot;station.txt&quot;,ios::in);

    in1&gt;&gt;n;

     while(    n--)

     &#123;

          Station tem1;

               in1&gt;&gt;tem1;

if(tem1.getname()==&quot;$$&quot;) continue;

            station.push_back(tem1);

             natosta.insert(make_pair(tem1.getname(),station.size()-1));

     &#125;

     in1.close();

     ifstream in2(&quot;train.txt&quot;,ios::in);

     in2&gt;&gt;n;

     while(n--   )

    &#123;

        Train tem2;

        in2&gt;&gt;tem2;

        if(tem2.gettr()==&quot;$$&quot;) continue;

        train.push_back(tem2);

        checitotrain.insert(make_pair(tem2.gettr(),train.size()-1));

    &#125;

    in2.close();

&#125;

void Baseque::save()

 &#123;

  ofstream out1(&quot;station.txt&quot;,ios::out);

  out1&lt;&lt;station.size()&lt;&lt;endl;

     for(auto po=station.begin();po!=station.end();po++)

        out1&lt;&lt;*po&lt;&lt;endl;

    out1.close();

    ofstream out2(&quot;train.txt&quot;,ios::out);

    out2&lt;&lt;train.size()&lt;&lt;endl;

     for(auto po=train.begin();po!=train.end();po++)

        out2&lt;&lt;*po&lt;&lt;endl;

        out2.close();

 &#125;
</code></pre>
<p>车票（记录）和用户数据读写及日志文件的形成：</p>
<pre><code class="hljs">void Client::load2()

&#123;

    ifstream in(&quot;user.txt&quot;,ios::in);

    int n;

    if(!in) return ;

    in&gt;&gt;n;

    while(n--)

    &#123;

        User tem;

        in&gt;&gt;tem;

        if(tem.getphone()==&quot;&amp;&amp;&amp;&quot;)continue;

        user.push_back(tem);

        idtouse.insert(make_pair(tem.getname(),user.size()-1));

    &#125;

    in.close();

    ifstream in2(&quot;tick.txt&quot;,ios::in);

    if(!in2) return ;

    in2&gt;&gt;n;

    while(n--)

    &#123;

        Tick tem;

        in2&gt;&gt;tem;

        if(tem.getname()==&quot;$$$&quot;) continue;

        tick.push_back(tem);

        hashtotick.insert(make_pair(tem.getname(),tick.size()-1));

    &#125;

    in.close();

&#125;

void Client::save2()

&#123;

    ofstream out(&quot;user.txt&quot;,ios::out);

    out&lt;&lt;user.size()&lt;&lt;endl;

    for(auto po=user.begin();po!=user.end();po++) out&lt;&lt;*po&lt;&lt;endl;

    out.close();

    ofstream out2(&quot;tick.txt&quot;,ios::out);

    stringstream sss;

    Time now;

    now.loadtime();

    string temp;

    sss&lt;&lt;now.getyear()&lt;&lt;&quot;年&quot;&lt;&lt;now.getmonth()&lt;&lt;&quot;月&quot;&lt;&lt;now.getday()&lt;&lt;&quot;日&quot;;

    sss&gt;&gt;temp;

    ofstream out3(temp,ios::out);   //做过的车，就存到日志文件不在读取。

    int sum=0;

    for(auto po=tick.begin();po!=tick.end();po++)

    &#123;

        if(now&gt;po-&gt;getlea())

        &#123;

            out3&lt;&lt;*po&lt;&lt;endl;

        &#125;

        else sum++;

    &#125;

    out3.close();

    out2&lt;&lt;sum&lt;&lt;endl;

    for(auto po=tick.begin();po!=tick.end();po++)

    &#123;

        if(now&gt;po-&gt;getlea()) continue;

        out2&lt;&lt;*po&lt;&lt;endl;

    &#125;

    out2.close();

&#125;
</code></pre>
<h4 id=""><a href="#" class="headerlink" title=""></a></h4><h2 id="设计体会与小结"><a href="#设计体会与小结" class="headerlink" title="设计体会与小结"></a>设计体会与小结</h2><p>课程设计中遇到了一个文件读写的问题，让我很棘手，从来不会觉得自己是文件对不上数据读取出现问题，开始寻找问题，一开始以为是文件流写错了，开始检查检查了好几遍，最后该手动输入但是还是有问题，我觉的可能是 vector 的内存空间不够了，输入指针失效了，但是在 CSDN 只是看到了这个问题，并没有找到合适的解决方法，系统就到了瓶颈期，只要这个文件读不进去，整个系统都完蛋了，开始发荒，再检查一遍还是不对，这个时候还是没察觉到自己文件有问题，回过头去重新测重载输入流，测试发现正确，于是我觉得我的文件出现了问题，去检查数据文件，数据文件看上去没问题，发现还是不能正常读入，于是又回过头用之前数据类的重载的输入输出流测数据，发现有一组数据两个数之间少了空格，于是输入 int 的位置放上了 string，才导致错误，经过修改后程序终于可以顺利运行，但是就因为一个数据文件，却耽误了整整一天，这对于这段段代码来说，一天不是什么问题，但是如果真的到了就业，还是犯这种粗枝大叶的毛病的话，那可能不是耽误自己，而是耽误一个团队，从一点小事就反映出，敲代码是一个谨慎的工作，可能一字之差，带了结果影响巨大，在这次课程设计中，我通过调代码的痛苦过程铭记谨小慎微的心态，而不是抱着一种我觉得这样没错，这样跟我想的一样，而不真的去检验，也没有考虑的那么全面，这是我在课程设计中最大的教训，也是最大收获。</p>
<p>课程设计中又回顾了很久之前用过的字符串流，很长时间没有使用确实略显生疏，但是在摸索下还是上手很快，其他也使用很多的重载运算符，尤其是对于输入输出流的重载，这对于文件读写来说甚是方便。最重要的是学习了一种文件读写的方式，ifstream 于 oftream 的 open 参数是一个字符串，这是之前没有发现的事情，只是知道第一个参数可以传“参数”，但是却忽略了双引号就是一个 string，在查阅记录无果后，询问老师，老师给出了方法，在看了源码后发现这里就是一个 string，通过传一个 string 参数就可以动态的打开一个文件，也可以动态生成任意文件名储存到任意路径。</p>
<p>通过自己写代码发现，思路设计的时候总是眼高手低，觉得这个可以这样实现，那个可以那样实现，但是等到真的实现的时候却发现他并不是那么轻易的就会被实现，所以设想哥实现了具体操作的时候是有很大的出入的，所以应该在设想的时候就要具体的去设计一些功能，而不是浅显的觉得这个东西用什么可以去实现，比如买票，而买票的，厄设计的时候当时想的整个区间都减一，但是却没有想到这个票的站台票和车次车次上的余票是分开的，而且操作的时候也要分两步进行操作。</p>
<p>代码中的不足之处是没有写出换乘，一是换乘的实现过程比较复杂，二是数据文件不太支持，所以没有写出来是比较遗憾的，没有把算法和程序结合，这点也是不足之处，需要改进！</p>
<pre><code class="hljs">#include&lt;bits/stdc++.h.&gt;
using namespace std;
class Time
&#123;
    int  year,month,day;
    int hour,mini;
public:
    Time()&#123;loadtime();&#125;
    Time(int y,int m,int d):year(y),month(m),day(d)&#123;&#125;;   //用于车票生成。
    void loadtime();    //定义时间获取函数，用于获取买票时间，直接从系统读入；
    friend istream &amp; operator&gt;&gt;(istream &amp;in,Time &amp; a);
    friend stringstream &amp; operator&gt;&gt;(stringstream &amp;in,Time &amp; a);
    friend ostream &amp; operator&lt;&lt;(ostream &amp;out,Time &amp; a); //排序函数，用于车票信息的储存；
    bool operator &lt;(const Time &amp;d)const;   //重载小于号，用于数据时间排序，不需要修改数据const
    int judge() const;  //判断是否为闰年;
    int judge(int year) const ;//写一个有参的判断函数；
    Time operator +(int  a) ;   //重载加号,用于放票；
     bool operator ==(Time &amp; a) ; //判断是否为一天；
    friend int operator -(Time a,Time b);  //计算两段时间间隔；
    void print()const;//打印时间；
    bool operator&gt;(Time&amp;a);
    int getday()&#123;return day;&#125;
    int getmonth()&#123;return month;&#125;
    int getyear()&#123;return year;&#125;
    int gethour()&#123;return hour;&#125;
    void set();
    void setmonth(int a)&#123;month=a;&#125;
    pair&lt;int,int&gt; tksj(Time&amp;b); //停靠时间
    void seth(int a,int b)&#123;hour=a;mini=b;&#125;
&#125;;
 bool Time ::operator&gt;(Time&amp;a)
 &#123;
      return (year!=a.year)?year&gt;a.year:month!=a.month?month&gt;a.month:day!=a.day?day&gt;a.day:0;
 &#125;
bool Time::operator ==(Time &amp; a)
&#123;
    return (year!=a.year)?0:month!=a.month?0:day!=a.day?0:hour!=a.hour?0:mini==a.mini;
&#125;
Time Time::operator +(int  a)
&#123;
    int m[] = &#123;0,31,28,31,30,31,30,31,31,30,31,30,31&#125;;
    day+=a;
    int flag=1;
   while(day&gt;m[month])&#123;
        if(month==2)&#123;
            if(day&gt;m[month]+judge())&#123;
                day-=m[month]+judge();
                month++;
            &#125;
        &#125;
        else &#123;
            day=day-m[month];
            month++;
        &#125;
        if(month&gt;12)&#123;
        month-=12;
        year++;
    &#125;
   &#125;
&#125;
int operator -(Time a,Time b)
&#123;
    int monthdays[2][12] = &#123; &#123; 31,28,31,30,31,30,31,31,30,31,30,31 &#125;,&#123; 31,29,31,30,31,30,31,31,30,31,30,31 &#125; &#125;;
    int yeardays[2] = &#123; 365,366 &#125;;
    int sumdays=0;
   if (a.year == b.year&amp;&amp; a.month == b.month)&#123;
        sumdays = b.day - a.day;
    &#125;
    else
        if (a.year == b.year)&#123;
            sumdays += monthdays[a.judge(a.year)][a.month-1] - a.day;
            for (int i = a.month; i &lt; b.month-1; i++)
                sumdays += monthdays[a.judge(a.year)][i];
            sumdays += b.day;
        &#125;
        else&#123;
            sumdays += monthdays[a.judge(a.year)][a.month-1] - a.day;
            for (int i = a.month; i &lt; 12; i++)
                sumdays += monthdays[a.judge(a.year)][i];
            for (int i = a.year + 1; i &lt; b.year; i++)
                sumdays += yeardays[a.judge(i)];
            for (int i = 0; i &lt; b.month - 1; i++)
                sumdays += monthdays[a.judge(b.year)][i];
            sumdays += b.day;
        &#125;
    return sumdays;
&#125;
int Time::judge() const&#123;
        if(year % 4 == 0 &amp;&amp; year %100 != 0 ||year % 400 == 0) return 1;
        else return 0;
&#125;
int Time::judge(int year) const&#123;
    if (year % 4 == 0 &amp;&amp; year % 100 != 0 || year % 400 == 0)return 1;
    else  return 0;
&#125;
void Time::loadtime()&#123;
    time_t rawtime;
    struct tm *ptminfo;
    time(&amp;rawtime);
    ptminfo = localtime(&amp;rawtime);
    year=ptminfo-&gt;tm_year + 1900;
    month=ptminfo-&gt;tm_mon + 1;
    day=ptminfo-&gt;tm_mday;
    hour=ptminfo-&gt;tm_hour;
    mini=ptminfo-&gt;tm_min;
&#125;
istream &amp; operator&gt;&gt;(istream &amp;in,Time &amp; a)&#123;
    in&gt;&gt;a.year&gt;&gt;a.month&gt;&gt;a.day&gt;&gt;a.hour&gt;&gt;a.mini;
    return in;
&#125;
ostream &amp; operator&lt;&lt;(ostream &amp;out,Time &amp; a)
&#123;
    out&lt;&lt;a.year&lt;&lt;&quot; &quot;&lt;&lt;a.month&lt;&lt;&quot; &quot;&lt;&lt;a.day&lt;&lt;&quot; &quot;&lt;&lt;a.hour&lt;&lt;&quot; &quot;&lt;&lt;a.mini&lt;&lt;&#39; &#39;;
    return out;
&#125;
stringstream &amp; operator&gt;&gt;(stringstream &amp;in,Time &amp; a)&#123;
    in&gt;&gt;a.year&gt;&gt;a.month&gt;&gt;a.day&gt;&gt;a.hour&gt;&gt;a.mini;
    return in;
&#125;
bool Time:: operator &lt;(const Time &amp;d)const&#123;
    return year!=d.year?year&lt;d.year:month!=d.month?month&lt;d.month:day!=d.day?hour&lt;d.hour:mini&lt;d.mini;
&#125;
void Time:: print()const
&#123;
      cout&lt;&lt;year&lt;&lt;&quot;年&quot;&lt;&lt;month&lt;&lt;&quot;月&quot;&lt;&lt;day&lt;&lt;&quot;日&quot;;
            printf(&quot;%02d:%02d\n&quot;,hour,mini);
&#125;
void Time::set()//容错处理
&#123;
        int monthdays[2][12] = &#123; &#123; 31,28,31,30,31,30,31,31,30,31,30,31 &#125;,&#123; 31,29,31,30,31,30,31,31,30,31,30,31 &#125; &#125;;
      cout&lt;&lt;&quot;请依次输入&quot;&lt;&lt;&quot; 年&quot;&lt;&lt;&quot; 月&quot;&lt;&lt;&quot; 日&quot;&lt;&lt;&quot; 小时&quot;&lt;&lt;&quot; 分钟&quot;&lt;&lt;endl;
      cin&gt;&gt;year;
      while(year&lt;2019)&#123;cout&lt;&lt;&quot;不是正确时间，请重新输入年&quot;&lt;&lt;endl;cin&gt;&gt;year;&#125;
     cin &gt;&gt;month;
      while(month&gt;12||month&lt;1)&#123;cout&lt;&lt;&quot;不是正确时间，请重新输入月&quot;&lt;&lt;endl;cin&gt;&gt;month;&#125;
     cin&gt;&gt;day;
      while(monthdays[judge()][month-1]&lt;day||day&lt;1)&#123;cout&lt;&lt;&quot;不是正确时间，请重新输入日&quot;&lt;&lt;endl;cin&gt;&gt;day;&#125;
    cin&gt;&gt;hour;
    while(hour&gt;24||hour&lt;0)&#123;cout&lt;&lt;&quot;不是正确时间，请重新输入小时&quot;&lt;&lt;endl;cin&gt;&gt;hour;&#125;
    cin&gt;&gt;mini;
    while(mini&gt;60||mini&lt;0)&#123;cout&lt;&lt;&quot;不是正确时间，请重新输入分钟&quot;&lt;&lt;endl;cin&gt;&gt;mini;&#125;
    cout&lt;&lt;&quot;时间已更改为&quot;&lt;&lt;endl;
    print();
&#125;
pair&lt;int,int&gt; Time::tksj(Time &amp;b)//高铁晚上不开车，不考虑超过一天；
&#123;
    pair&lt;int,int&gt;  w;
    if(mini&lt;b.mini)
    &#123;
       w.second=mini-b.mini+60;
       w.first=hour-b.hour-1;
       return w;
    &#125;
    w.second=mini-b.mini;
    w.first=hour-b.hour;
    return w;
&#125;
/*
int main()
&#123;
    Time demo;
    demo.loadtime();
    cout&lt;&lt;demo&lt;&lt;endl;
    demo.print();
&#125;*/
/*int main()
&#123;
    Time demo1;
    cin&gt;&gt;demo1;
    Time demo2(demo1);
    demo1.print();
&#125;*/
/*
int main()
&#123;
    Time demo;
    cout&lt;&lt;demo.judge()&lt;&lt;endl;
    cout&lt;&lt;demo.judge(2008)&lt;&lt;endl;
&#125;*/
/*
int main()
&#123;
    set&lt;Time&gt;demo;
    Time tx;
    int     n=3;
    while(n--)
    &#123;
        tx.set();
        demo.insert(tx);
    &#125;
     set&lt;Time&gt;::iterator po;
    for(po=demo.begin();po!=demo.end();po++)  (*po).print();
&#125;*/
/*
int main()
&#123;
    Time demo1,demo2;
    demo1.loadtime();
    cin&gt;&gt;demo2;
    cout&lt;&lt;demo2.tksj(demo1).first&lt;&lt;&#39; &#39;&lt;&lt;demo2.tksj(demo1).second;
&#125;*/
struct piao
&#123;
    string name;
    int sum[31];
    bool operator &lt;(const piao&amp; a)const
    &#123;
        return name&lt;a.name;
    &#125;
&#125;;
class Station
&#123;
    string name; //车站名唯一
    int crotrain;//经过车次数量
    vector&lt;piao&gt; checi; //第一个string是车次，第二个是余票
    //这个车站最多买多少张票，不一定跟总票数相同
public:
    Station(string na,int n);
    Station():name(&quot;&quot;),crotrain(0)&#123;checi.clear();&#125;
    void print(int riqi);
    void insert(string a);//为站台增加车次
    vector&lt;piao&gt;&amp; quecheci();
    friend istream&amp;   operator&gt;&gt;(istream &amp;in,Station &amp; a);
    friend   ostream&amp;   operator&lt;&lt;(ostream &amp;out,Station &amp; a);
    bool del(string a);
    bool set(string a,int b,int c);// 如果需要调度余票，可以修改
    void setname(string a)&#123;this-&gt;name=a;&#125;
    string getname()&#123;return name;&#125;
    void buytic(string a,int b);
    void rebac(string a,int b);
&#125;;
void Station::rebac(string a,int b)
&#123;
    for(auto po=checi.begin();po!=checi.end();po++)
        if(po-&gt;name==a) po-&gt;sum[b]++;
&#125;
void Station::buytic(string a,int b)
&#123;
    for(auto po=checi.begin();po!=checi.end();po++)
        if(po-&gt;name==a) po-&gt;sum[b]--;
&#125;
Station::Station(string na,int n)
&#123;
    name=na;
    crotrain=n;
    for(int i=0;i&lt;n;i++)
    &#123;
       cout&lt;&lt;&quot;输入车次 余票：\n&quot;;
        piao w;
        cin&gt;&gt;w.name;
        for(int i=0;i&lt;31;i++) cin&gt;&gt;w.sum[i];
      checi.push_back(w);
    &#125;
&#125;
istream&amp; operator&gt;&gt;(istream&amp; in,Station &amp; w)
&#123;
    in&gt;&gt;w.name&gt;&gt;w.crotrain;
    //cout&lt;&lt;w.crotrain&lt;&lt;endl;
    for(int i=0;i&lt;w.crotrain;i++)
    &#123;
        piao qq;
        in&gt;&gt;qq.name;
        for(int i=0;i&lt;31;i++) in&gt;&gt;qq.sum[i];
     w.checi.push_back(qq);
    &#125;
    return in;
&#125;
ostream&amp; operator&lt;&lt;(ostream&amp; out,Station &amp; w)
&#123;
    out&lt;&lt;w.name&lt;&lt;&quot; &quot;&lt;&lt;w.crotrain&lt;&lt;endl;
    for(auto po=w.checi.begin();po!=w.checi.end();po++)
    &#123;
        out&lt;&lt;po-&gt;name&lt;&lt;endl;
        for(int i=0;i&lt;31;i++)  out&lt;&lt;po-&gt;sum[i]&lt;&lt;&#39; &#39;;
        out&lt;&lt;endl;
    &#125;
    return out;
&#125;
void Station::print(int b)
&#123;
    cout&lt;&lt;name&lt;&lt;&quot;:&quot;&lt;&lt;endl;
    for(auto po=checi.begin();po!=checi.end();po++)
    &#123;
        cout&lt;&lt;&quot;车次:&quot;&lt;&lt;po-&gt;name&lt;&lt;&quot; 余票:&quot;&lt;&lt;po-&gt;sum[b]&lt;&lt;endl;
    &#125;
&#125;
vector&lt;piao&gt;&amp; Station ::quecheci()
&#123;
    return checi;
&#125;
void Station::insert(string a)
&#123;
        piao w;
        w.name=a;
        for(int i=0;i&lt;31;i++) cin&gt;&gt;w.sum[i];
      checi.push_back(w);
&#125;
bool Station::del(string a)
&#123;
    for(auto po=checi.begin();po!=checi.end();po++)
    &#123;
        if(po-&gt;name==a) &#123;checi.erase(po);break;&#125;
    &#125;
    if(checi.size()!=crotrain)
    &#123;
        crotrain=checi.size();
        return 1;
    &#125;
    else  return 0;
&#125;
  bool Station::set(string a,int b,int c)
  &#123;
    for(auto po=checi.begin();po!=checi.end();po++)
    &#123;
        if(po-&gt;name==a) &#123;
            po-&gt;sum[c]=b;
            return 1;
        &#125;
        else return 0;
    &#125;
  &#125;
/*
int main()
&#123;
    int n;
    string a;
    cin&gt;&gt;n&gt;&gt;a;
    Station demo(a,n) ;
    demo.print();
&#125;
*/
/*
int main()
&#123;
    Station demo;
    cin&gt;&gt;demo;
    cout&lt;&lt;demo;
&#125;*/
/*
int main()
&#123;
    Station demo;
    int a;
    string b;
    cin&gt;&gt;b&gt;&gt;a;
    demo.insert(b,a);
    cin&gt;&gt;b&gt;&gt;a;
    demo.insert(b,a);
    vector&lt;pair&lt;string,int&gt;&gt;w=demo.quecheci();
    for(auto po=w.begin();po!=w.end();po++)
        cout&lt;&lt;po-&gt;first&lt;&lt;&#39; &#39;&lt;&lt;po-&gt;second&lt;&lt;endl;
&#125;*/
/*
int main()
&#123;
    Station demo;
    string a;
    cin&gt;&gt;a;
    demo.setname(a);
    int b;
    cin&gt;&gt;a&gt;&gt;b;
    demo.insert(a,b);
    cin&gt;&gt;a&gt;&gt;b;
    demo.insert(a,b);
    demo.print();
    cin&gt;&gt;a;
    cout&lt;&lt;demo.del(a)&lt;&lt;endl;
    cin&gt;&gt;a;
    cout&lt;&lt;demo.del(a);
    cin&gt;&gt;a&gt;&gt;b;
    cout&lt;&lt;demo.set(a,b)&lt;&lt;endl;
    cin&gt;&gt;a&gt;&gt;b;
    cout&lt;&lt;demo.set(a,b)&lt;&lt;endl;
    demo.print();
&#125;*/
//修改后从新测试，get/set比较比较简单，一般不会写错。
/*
int main()
&#123;
    Station demo;
    string b;
    cin&gt;&gt;b;
    demo.insert(b);
    cin&gt;&gt;b;
    demo.insert(b);
    vector&lt;piao&gt;w=demo.quecheci();
    for(auto po=w.begin();po!=w.end();po++)
       &#123;
            cout&lt;&lt;po-&gt;name&lt;&lt;&#39; &#39;;
            for(int i=0;i&lt;31;i++) cout&lt;&lt;po-&gt;sum[i]&lt;&lt;&#39; &#39;;
            cout&lt;&lt;endl;
       &#125;

&#125;*/
class Zt  //中规中矩的全家桶数据类
&#123;
    pair&lt;int,int&gt; arrive; //在某站的出发到达时家间；
    pair&lt;int,int&gt; leave;
    string  station;  //作为数据类时指向vector站台;
    int piao[31];// 实际上存在多少票,今天五号，五号前的是下个月，五号后是这个月，不能买今天前的票。
public:
    Zt(string  a,int c,int d,int e,int f):station(a)&#123;setarrive(c,d);setleave(e,f);fill(piao,piao+31,100);&#125;
    Zt()&#123;fill(piao,piao+31,100);&#125;
     pair&lt;int,int&gt;  &amp;getarrive()&#123;return arrive;&#125;
     pair&lt;int,int&gt;  &amp;getleave()&#123;return leave;&#125;
    int getarr(); //出发时段到达只是时段
    int getlea();
    string getsta()const&#123;return station;&#125;
    void setarrive(int a,int b)&#123;arrive.first=a;arrive.second=b;&#125;  //用于修改出站到站时间；
    void setleave(int a,int b)&#123;leave.first=a;leave.second=b;&#125;
    void setsta(string  a)&#123;station=a;&#125;
    void printtk();
    void print();
    void printa();
     void printl();
    int getpiao(int i)&#123;return piao[i];&#125;
    void setpiao(int a,int b)&#123;piao[b]=a;&#125;
    friend istream&amp;operator&gt;&gt;(istream &amp;in,Zt&amp; a);
    friend ostream&amp;operator&lt;&lt;(ostream &amp;out,Zt&amp; a);
&#125;;
void Zt:: print()
&#123;
    cout&lt;&lt;station&lt;&lt;endl;
    printf(&quot;%02d:%02d &quot;,arrive.first,arrive.second);
    //cout&lt;&lt;arrive.first&lt;&lt;arrive.second&lt;&lt;endl;
    printf(&quot;%02d:%02d\n&quot;,leave.first,leave.second);
   // cout&lt;&lt;leave.first&lt;&lt;leave.second&lt;&lt;endl;
&#125;
void Zt:: printl()
&#123;
    cout&lt;&lt;station&lt;&lt;endl;
    printf(&quot;%02d:%02d\n&quot;,leave.first,leave.second);
&#125;
void Zt:: printa()
&#123;
    cout&lt;&lt;station&lt;&lt;endl;
    printf(&quot;%02d:%02d &quot;,arrive.first,arrive.second);
&#125;
int Zt::getarr()
&#123;
    if(arrive.first&gt;=0||arrive.first&lt;6) return 1;
    else if(arrive.first&gt;=6||arrive.first&lt;12) return 2;
    else if(arrive.first&gt;=12||arrive.first&lt;18) return 3;
    else return 4;
&#125;
int Zt::getlea()
&#123;
    if(leave.first&gt;=0||leave.first&lt;6) return 1;
    else if(leave.first&gt;=6||leave.first&lt;12) return 2;
    else if(leave.first&gt;=12||leave.first&lt;18) return 3;
    else return 4;
&#125;
void Zt::printtk()
&#123;
    cout&lt;&lt;leave.second-arrive.second&lt;&lt;&quot;分钟 &quot;&lt;&lt;endl;//没有超过一个小时的；
&#125;
istream&amp;operator&gt;&gt;(istream &amp;in,Zt&amp; a)
&#123;
    in&gt;&gt;a.station;
   // cout&lt;&lt;a.station;
   in&gt;&gt;a.arrive.first;
 //  cout&lt;&lt;a.station;
    in&gt;&gt;a.arrive.second;
//    cout&lt;&lt;a.station;
    in&gt;&gt;a.leave.first;
 //   cout&lt;&lt;a.station;
    in&gt;&gt;a.leave.second;
    //cout&lt;&lt;a.station;
    for(int i=0;i&lt;31;i++) in&gt;&gt;a.piao[i];
    return in;
&#125;
ostream&amp;operator&lt;&lt;(ostream &amp;out,Zt &amp;a)
&#123;
    out&lt;&lt;a.station&lt;&lt;&#39; &#39;&lt;&lt;a.arrive.first&lt;&lt;&#39; &#39;&lt;&lt;a.arrive.second&lt;&lt;&#39; &#39;&lt;&lt;a.leave.first&lt;&lt;&#39; &#39;&lt;&lt;a.leave.second&lt;&lt;&#39; &#39;;
    for(int i=0;i&lt;31;i++) out&lt;&lt;a.piao[i]&lt;&lt;&#39; &#39;;
    out&lt;&lt;endl;
    return out;
&#125;
/*
int main()
&#123;

    string a;
    int b,c,d,e;
     Zt demo(a,b,c,d,e);
    cout&lt;&lt;demo.getpiao(15)&lt;&lt;endl;
&#125;*/
/*
int main()
&#123;
    Zt demo1;
    vector&lt;Zt&gt;demo;
    while(cin&gt;&gt;demo1) demo.push_back(demo1);
    cout&lt;&lt;demo1;
&#125;*/
/*
int main()
&#123;
    short n;
    cin&gt;&gt;n;
    Zt demo(n);
    demo.print();
    demo.printtk();
   cout&lt;&lt;demo.getlea()&lt;&lt;endl;
   cout&lt;&lt;demo.getarr()&lt;&lt;endl;
   cout&lt;&lt;demo.getsta()&lt;&lt;endl;
&#125;
*/
/*
int main()
&#123;
    Zt demo;
   demo.setarrive();
   demo.setleave();
   cout&lt;&lt;demo.getarrive()&lt;&lt;endl;
   cout&lt;&lt;demo.getleave()&lt;&lt;endl;
&#125;
*/
/*
int main()
&#123;
    Zt demo;
    int n;
    cin&gt;&gt;n;
    demo.setpiao(n);
    cout&lt;&lt; demo.getpiao();
&#125;*/
class Train
&#123;
    string train; //车次
    vector&lt;Zt&gt; station;
    vector&lt;string&gt;people;//谁买了票指向peo下标，居题买那张票，再等用户的数据,或者存身份证。
                //双重map，不如直接string
    map&lt;string,int&gt; ys;
    struct node
    &#123;
        int val;
        int len;
        int lazy;
        int l,r;
    &#125;tree[31][300005];
public:

    Train():train(&quot;&quot;)&#123;people.clear();station.clear();&#125;
    Train(string tr):train (tr)&#123;people.clear();station.clear();&#125;
    pair&lt;int,int&gt; buytic(string  a,string  b,int riqi);
    void reback(string  a,string  b,int riqi);
    void insert(string  a,int d,int f,int g,int h,string w);
    bool del(string  a);
    void cx(string a); //查到就打印，查不到就拉倒
    void setarrive(string  a);//修改某个站的到站时间出发时间
    void setleave(string a);
    void setsta(string a);
    int cxyp(string a, string b,int c);
    vector&lt;string&gt;&amp;getpeople()&#123;return people;&#125;
   // void printf();无法获取站台信息，只能传引用了
     vector&lt;Zt&gt;&amp; getzt()&#123;return station;&#125;
     friend istream&amp;operator&gt;&gt;(istream&amp; in,Train &amp;a);
     friend ostream&amp;operator&lt;&lt;(ostream&amp; out,Train &amp;a);
     void settr(string a)&#123;train=a;&#125;
     string  gettr()&#123;return train;&#125;
     //void built_tree( int node, int left, int right,int day );
  //  void  pushdown(int root,int day)  ;//向下传递lazy标记
  //  int query(int root,int l,int r,int day);  //计算区间和
  //  void  update(int root,int l,int r,int addval,int day);  //区间更新
&#125;;
/*void Train:: built_tree(int root,int l,int r,int day)  //建树
&#123;
    int mid;
    tree[day][root].lazy=0;
    tree[day][root].l=l;
    tree[day][root].r=r;
    tree[day][root].len=r-l+1;
    if (l==r) tree[day][root].val=station[l].getpiao(day);
    else
    &#123;
        mid=(l+r)/2;
        built_tree(root*2,l,mid,day);
        built_tree(root*2+1,mid+1,r,day);
        tree[day][root].val=min(tree[day][root*2].val,tree[day][root*2+1].val);
    &#125;
&#125;*/
/*void Train:: pushdown(int root,int day)  //向下传递lazy标记
&#123;
    if (tree[day][root].lazy)
    &#123;
        tree[day][root*2].lazy+=tree[day][root].lazy;
        tree[day][root*2+1].lazy+=tree[day][root].lazy;
        tree[day][root*2].val+=tree[day][root].lazy;
        tree[day][root*2+1].val+=tree[day][root].lazy;
        tree[day][root].lazy=0;
    &#125;
&#125;
int Train:: query(int root,int l,int r,int day)  //计算区间和
&#123;
    int mid;
    if (tree[day][root].l&gt;=l&amp;&amp;tree[day][root].r&lt;=r)
        return tree[day][root].val;
    if (tree[day][root].l&gt;r||tree[day][root].r&lt;l)
        return 0x7f7f7f7f;
    if (tree[day][root].lazy) pushdown(root,day);
    return min(query(root*2,l,r,day),query(root*2+1,l,r,day));
&#125;
void Train:: update(int root,int l,int r,int addval,int day)  //区间更新
&#123;
    int mid;
    if (tree[day][root].l&gt;=l&amp;&amp;tree[day][root].r&lt;=r)
    &#123;
        tree[day][root].lazy+=addval;
        tree[day][root].val+=addval;
        return;
    &#125;
    if (tree[day][root].l&gt;r||tree[day][root].r&lt;l)
        return;
    if (tree[day][root].lazy) pushdown(root,day);
    update(root*2,l,r,addval,day);
    update(root*2+1,l,r,addval,day);
    tree[day][root].val=min(tree[day][root*2].val,tree[day][root*2+1].val);
&#125;*/
pair&lt;int,int&gt;  Train::buytic(string  a,string  b,int c)  //站台的票和列车票是分步的 ,这是买票操作的一部分。
&#123;
    pair&lt;int,int&gt; www;
 //   update(1,ys[a],ys[b],-1,c);
    www=station[ys[a]].getleave();
    return www;
&#125;
void  Train::reback(string  a,string  b,int riqi)
&#123;
   //update(1,ys[a],ys[b],1,riqi);
&#125;
void Train::insert(string  a,int d,int f,int g,int h,string w)
&#123;
   Zt tem(a,d,f,g,h);
   if(w==&quot;END&quot;||w==&quot;end&quot;||w==&quot;End&quot;)
   &#123;
       station.push_back(tem);
       ys.insert(make_pair(a,station.size()-1));
   &#125;
   else &#123;
        station.insert(station.begin()+ys[w],tem);
        for(auto po=station.begin()+ys[w]-1;po!=station.end();po++)
        &#123;
            ys.insert(make_pair(po-&gt;getsta(),po-station.begin()));
        &#125;
   &#125;
//    for(int i=0;i&lt;=31;i++)built_tree(0,0,station.size()-1,i);
&#125;
int  Train::cxyp(string  a,string  b,int c)
&#123;
   //  return  query(1,ys[a],ys[b],c);
&#125;
/*
void Train::print()
&#123;
    for(auto po=station.begin();po!=station.end();po++)
    &#123;
        cout&lt;&lt;
    &#125;
&#125;*/
bool  Train::del(string  a)
&#123;
    bool flag=0;
    for(auto po=station.begin();po!=station.end();po++)
    &#123;
        if(po-&gt;getsta()==a)
        &#123;
            station.erase(po);
            flag=1;
            break;
        &#125;
    &#125;
    return flag;
&#125;
void  Train::cx(string  a)
&#123;
    for(auto po=station.begin();po!=station.end();po++)
    &#123;
        if(po-&gt;getsta()==a)
        &#123;
            po-&gt;print();
            po-&gt;printtk();
            break;
        &#125;
    &#125;
&#125;
void Train::setarrive(string   a)
&#123;
    for(auto po=station.begin();po!=station.end();po++)
    &#123;
        if(po-&gt;getsta()==a)
        &#123;
            int a,b;
            cin&gt;&gt;a&gt;&gt;b;
            po-&gt;setarrive(a,b);
            break;
        &#125;
    &#125;
&#125;
void Train:: setleave(string  a)
&#123;
    for(auto po=station.begin();po!=station.end();po++)
    &#123;
        if(po-&gt;getsta()==a)
        &#123;
            int a,b;
            cin&gt;&gt;a&gt;&gt;b;
            po-&gt;setleave(a,b);
            break;
        &#125;
    &#125;
&#125;
void  Train::setsta(string  a)
&#123;
    for(auto po=station.begin();po!=station.end();po++)
    &#123;
        if(po-&gt;getsta()==a)
        &#123;
            po-&gt;setsta(a);
            break;
        &#125;
    &#125;
&#125;
istream&amp;operator&gt;&gt;(istream&amp; in,Train &amp;a)
&#123;
    //vector&lt;Zt&gt; ww;
    a.ys.clear();
    int m,n;
            Zt demo;
    in&gt;&gt;a.train&gt;&gt;n&gt;&gt;m;//=0;
    while(n--)
    &#123;
        in&gt;&gt;demo;
        a.station.push_back(demo);
        a.ys.insert(make_pair(demo.getsta(),a.station.size()-1));
      //  cout&lt;&lt;ww.station.size()&lt;&lt;endl;
    &#125;
   // a.station.swap(ww);
    while(m--)
    &#123;
        string w;
        in&gt;&gt;w;
       a. people .push_back(w);
    &#125;
//    for(int i=0;i&lt;=31;i++)a.built_tree(0,0,a.station.size()-1,i);
    return in;
&#125;
ostream&amp;operator&lt;&lt;(ostream&amp; out,Train &amp;a)
&#123;
    out&lt;&lt;a.train&lt;&lt;&#39; &#39;&lt;&lt;a.station.size()&lt;&lt;&#39; &#39;&lt;&lt;a.people.size()&lt;&lt;endl;
    for(auto po=a.station.begin();po!=a.station.end();po++) out&lt;&lt;*po&lt;&lt;&#39; &#39;;
    for(auto po=a.people.begin();po!=a.people.end();po++) out&lt;&lt;*po&lt;&lt;&#39; &#39;;
    out&lt;&lt;endl;
    return out;
&#125;
/*
int main()
&#123;
    Train demo;
    cin&gt;&gt;demo;
    cout&lt;&lt;demo;
&#125;*/
/*
int main()
&#123;
    Train demo;
    short a,b;
    int c;
    cin&gt;&gt;a&gt;&gt;c;
    demo.insert(a,c);
    cin&gt;&gt;b&gt;&gt;c;
    demo.insert(b,c);
    cout&lt;&lt;demo.cxyp(a,b)&lt;&lt;endl;
    demo.buytic(a,b);
    cout&lt;&lt;demo.cxyp(a,b)&lt;&lt;endl;
    demo.reback(a,b);
    cout&lt;&lt;demo.cxyp(a,b)&lt;&lt;endl;
&#125;
*/
/*
int main()
&#123;
    Train demo;
    cin&gt;&gt;demo;
    short int a;
    cin&gt;&gt;a;
    demo.cx(a);
    demo.del(a);
    demo.cx(a);
    cin&gt;&gt;a;
    demo.setarrive(a);
        demo.cx(a);
    demo.setleave(a);
        demo.cx(a);
    demo.setsta(a);
        demo.cx(a);
&#125;*/
/*
int main()
&#123;
    Train demo;
    cin&gt;&gt;demo;
    cout&lt;&lt;demo.gettr()&lt;&lt;endl;
    string tem;
    cin&gt;&gt;tem;
    demo.settr(tem);
    cout&lt;&lt;demo.gettr()&lt;&lt;endl;
&#125;*/

int main()
&#123;
    Train demo;
    cin&gt;&gt;demo;
    string a,b;
    int c;
   int d,e,f,g;
  cin&gt;&gt;a&gt;&gt;d&gt;&gt;e&gt;&gt;f&gt;&gt;g&gt;&gt;b;
  demo.insert(a,d,e,f,g,b);
    cin&gt;&gt;a&gt;&gt;b&gt;&gt;c;
    cout&lt;&lt;demo.cxyp(a,b,c)&lt;&lt;endl;
    cin&gt;&gt;a&gt;&gt;b&gt;&gt;c;
     cout&lt;&lt;demo.cxyp(a,b,c)&lt;&lt;endl;
    demo.buytic(a,b,c);
     cout&lt;&lt;demo.cxyp(a,b,c)&lt;&lt;endl;
     demo.reback(a,b,c);
      cout&lt;&lt;demo.cxyp(a,b,c)&lt;&lt;endl;
&#125;
class Tick //即使车票，又是记录
&#123;
    Time buy;
    Time leave; //出发时间,用于确定存日志文件
    string  from;
    string  to;
    string id;
    string name;
public:
    //只有get函数
    Tick():from(&quot; &quot;),to(&quot; &quot;),id(&quot; &quot;)&#123;&#125;
    Tick(Time b,Time l,string f,string t,string i,string w):buy(b),leave(l),from(f),to(t),id(i),name(w)&#123;&#125;
    Time&amp;getbuy()&#123;return buy;&#125;
    Time&amp;getlea()&#123;return leave;&#125;
    string getfrom()&#123;return from;&#125;
    string getto()&#123;return to;&#125;
    string getid()&#123;return id;&#125;
    string getname();//本来想hash，但是有点复杂
   void print();
   string getna()&#123;return name;&#125;
    bool operator ==(Tick &amp;a);
    friend istream&amp; operator&gt;&gt;(istream&amp; in,Tick &amp;a );
    friend ostream&amp; operator&lt;&lt;(ostream &amp;out,Tick &amp;a );
&#125;;
string Tick::getname()
&#123;
    string w;
    stringstream tem;
    w.clear();
    tem.clear();
    tem&lt;&lt;leave.getday();
    tem&lt;&lt;leave.getmonth();
    tem&lt;&lt;leave.getyear();
    tem&gt;&gt;w;
    w=w+id+from+to;
    return w;
&#125;
bool Tick::operator ==(Tick &amp;a)
&#123;
   return a.buy==buy?(a.leave==leave?(from==a.from?(to==a.to?id==a.id:0):0):0):0;
&#125;
istream&amp; operator&gt;&gt;(istream &amp;in,Tick &amp;a )
&#123;
    in&gt;&gt;a.buy&gt;&gt;a.leave&gt;&gt;a.from&gt;&gt;a.to&gt;&gt;a.id&gt;&gt;a.name;
    return in;
&#125;
ostream&amp; operator&lt;&lt;(ostream &amp;out,Tick &amp;a )
&#123;
    out&lt;&lt;a.buy&lt;&lt;&#39; &#39;&lt;&lt;a.leave&lt;&lt;&#39; &#39;&lt;&lt;a.from&lt;&lt;&#39; &#39;&lt;&lt;a.to&lt;&lt;&#39; &#39;&lt;&lt;a.id&lt;&lt;&#39; &#39;&lt;&lt;a.name&lt;&lt;endl;
    return out;
&#125;
void Tick::print()
&#123;
    cout&lt;&lt;leave&lt;&lt;endl;
    cout&lt;&lt;from&lt;&lt;&quot;-----&gt;&quot;&lt;&lt;to&lt;&lt;endl;
    cout&lt;&lt;id&lt;&lt;endl;
&#125;/*
int main()
&#123;
    Tick demo;
    cin&gt;&gt;demo;
    cout&lt;&lt;demo.getname()&lt;&lt;endl;
&#125;*/
/*
int main()
&#123;
    Tick demo;
    cin&gt;&gt;demo;
    cout&lt;&lt;demo;
&#125;
*/
/*
int main()
&#123;
    Time demo1,demo2;
    short a,b;
    string  id;
    cin&gt;&gt;demo1&gt;&gt;demo2&gt;&gt;a&gt;&gt;b&gt;&gt;id;
    Tick demo(demo1,demo2,a,b,id);
    cout&lt;&lt;demo.getbuy()&lt;&lt;endl;
    cout&lt;&lt;demo.getlea()&lt;&lt;endl;
    cout&lt;&lt;demo.getfrom()&lt;&lt;endl;
    cout&lt;&lt;demo.getto()&lt;&lt;endl;
    cout&lt;&lt;demo.getid()&lt;&lt;endl;
&#125;*/
/*
int main()
&#123;
    string a,b,c;
    cin&gt;&gt;a&gt;&gt;b&gt;&gt;c;
    Time q, e;
    cin&gt;&gt;q&gt;&gt;e;
    Tick demo(q,e,a,b,c);
    cout&lt;&lt;demo;
    demo.print();
&#125;*/
/*
int main()
&#123;
    Tick demo;
    cin&gt;&gt;demo;
    demo.print();
&#125;*/
class User//用户信息
&#123;
    string name;
    string id;  //不能改
    vector&lt;string &gt; tic;
    string phone;
    string key;
    bool ban;//黑名单
public:
    User():name(&quot;&quot;),id(&quot;&quot;),phone(&quot;&quot;)&#123;tic.clear();&#125;
    User(string a,string b,string c):name(a),id(b),phone(c)&#123;tic.clear();&#125;
    void buytic(string  a)&#123;   tic.push_back(a);&#125; //只考虑买就行了,判断能不能买在下面的类.
    void setph(string p)&#123;    phone=p;&#125;
    vector&lt;string &gt;&amp; gettic()&#123;return tic;&#125;
    string getname()&#123;return name;&#125;
    string getphone()&#123;return phone;&#125;
    string getid()&#123;return id;&#125;
    string getkey()&#123;return key;&#125;
    void del(string  a);  //这是系统操作出行后，就看不到订单了。
    int getboupiao()&#123;return tic.size();&#125;
    bool getban()&#123;return ban;&#125;
    friend istream&amp;operator&gt;&gt;(istream&amp;in,User&amp;a);
    friend ostream&amp;operator&lt;&lt;(ostream&amp;out,User&amp;a);
&#125;;
void User::del(string  a)
&#123;
   for(auto po=tic.begin();po!=tic.end();po++)
   &#123;
       if(*po==a) tic.erase(po);
   &#125;
&#125;
istream&amp;operator&gt;&gt;(istream&amp;in,User&amp;a)
&#123;
    int w;
    in&gt;&gt;a.name&gt;&gt;a.id&gt;&gt;a.phone&gt;&gt;a.key&gt;&gt;a.ban&gt;&gt;w;
    while(w--)  //一个月前的就不读了
    &#123;
        string  q;
        in&gt;&gt;q;
        int dday=(q[0]-&#39;0&#39;)*10+(q[1]-&#39;0&#39;);
        int dmonth=(q[2]-&#39;0&#39;)*10+(q[3]-&#39;0&#39;);
        int dyear=(((q[4]-&#39;0&#39;)*10+(q[5]-&#39;0&#39;))*10+(q[6]-&#39;0&#39;))*10+(q[7]-&#39;0&#39;);
        Time tem(dyear,dmonth,dday);
        Time now;
        now.loadtime();
        if(now&gt;tem) continue;
        a.tic.push_back(q);
    &#125;
    return in;
&#125;
ostream&amp;operator&lt;&lt;(ostream&amp;out,User&amp;a)
&#123;
    out&lt;&lt;a.name&lt;&lt;&#39; &#39;&lt;&lt;a.id&lt;&lt;&#39; &#39;&lt;&lt;a.phone&lt;&lt;&#39; &#39;&lt;&lt;a.key&lt;&lt;&#39; &#39;&lt;&lt;&#39; &#39;&lt;&lt;a.ban&lt;&lt;&#39; &#39;&lt;&lt;a.tic.size()&lt;&lt;endl;
    for(auto po=a.tic.begin();po!=a.tic.end();po++) out&lt;&lt;*po&lt;&lt;&#39; &#39;;
    return out;
&#125;
/*
int main()
&#123;
    User demo;
    cin&gt;&gt;demo;
    cout&lt;&lt;demo;
&#125;
*/
/*
int main()
&#123;
    string name,id,phone;
    cin&gt;&gt;name&gt;&gt;id&gt;&gt;phone;
    User demo(name,id,phone);
    cout&lt;&lt;demo.getname()&lt;&lt;endl;
    cout&lt;&lt;demo.getid()&lt;&lt;endl;
    cout&lt;&lt;demo.getphone()&lt;&lt;endl;
    cin&gt;&gt;phone;
    demo.setph(phone);
    cout&lt;&lt;demo.getphone()&lt;&lt;endl;
&#125;
*/
/*
int main()
&#123;
    User demo;
    int a;
    cin&gt;&gt;a;
    demo.buytic(a);
    cin&gt;&gt;a;
    demo.buytic(a);
    vector&lt;int&gt;   w=demo.gettic();
    for(auto po=w.begin();po!=w.end();po++)cout&lt;&lt;*po&lt;&lt;endl;
    cin&gt;&gt;a;
    demo.del(a);
    w=demo.gettic();
    for(auto po=w.begin();po!=w.end();po++)cout&lt;&lt;*po&lt;&lt;endl;
&#125;*/
class Baseque //查询类
&#123;
protected:
    //12306所有的都具有唯一性。
    vector&lt;Station&gt; station;//列车里的int(站台编号）对应station的int；
    map&lt;string,int&gt;natosta;
    vector&lt;Train&gt; train;
    map&lt;string,int&gt;checitotrain;
   // vector&lt;User&gt; user;
  //  map&lt;string,int&gt; idtouser;
  //  vector&lt;Tick&gt; tick;
//    map&lt;int,int&gt; nutotic;
public:
    Baseque()&#123;station.clear();natosta.clear();train.clear();checitotrain.clear();load();&#125;
    void czcc(string a,int b,int d);
    void  cxcx(string a);
    bool cxyp(string a,string b,int c);
    void load();
    void save();
   //void insert()
    ~Baseque()&#123;save();&#125;
&#125;;
    /*void Baseque;;insert()
    &#123;
        Train  tem2;
        while(    cin&gt;&gt;tem2)
            &#123;
                 cout&lt;&lt;-2;  //手动调试点

         if(tem2.gettr()==&quot;$$&quot;) continue;
         train.push_back(tem2);
         checitotrain.insert(make_pair(tem2.gettr(),train.size()-1));

            &#125;
    &#125;*/
void Baseque ::czcc(string a,int b,int d)
&#123;
    vector&lt;piao&gt;w=station[natosta[a]].quecheci();
    for(auto po=w.begin();po!=w.end();po++)
    &#123;
       vector&lt;Zt&gt; q= train[checitotrain[po-&gt;name]].getzt();
       for(auto pi=q.begin();pi!=q.end();pi++)
       &#123;
            if(a==pi-&gt;getsta())
             &#123;
                 if(pi-&gt;getarr()==b||b==0||pi-&gt;getlea()==d||d==0)
                 &#123;
                      cout&lt;&lt;po-&gt;name&lt;&lt;endl;
                     if(pi!=q.begin())
                     &#123;
                            q.begin()-&gt;printl();

                           // cout&lt;&lt;1&lt;&lt;endl;
                            if(pi==q.end()-1)
                            &#123;
                                (q.end()-1)-&gt;printa();
                               //cout&lt;&lt;2&lt;&lt;endl;
                                    cout&lt;&lt;endl;
                            &#125;
                            else
                            &#123;
                                pi-&gt;print();
                                  //   cout&lt;&lt;endl;
                                (q.end()-1)-&gt;printa();
                               //  cout&lt;&lt;3&lt;&lt;endl;
                            &#125;
                             cout&lt;&lt;endl;
                     &#125;
                     else
                     &#123;
                                q.begin()-&gt;printl();
                                (q.end()-1)-&gt;printa();
                                cout&lt;&lt;endl;
                     &#125;
                     cout&lt;&lt;endl;
                 &#125;
             &#125;
           //  pi-&gt;print();

       &#125;
      //  cout&lt;&lt;endl;
    &#125;
&#125;
void Baseque ::cxcx(string a)  //车次查询
&#123;
    if(checitotrain.find(a)==checitotrain.end())
    &#123;
        cout&lt;&lt;&quot;NO Train&quot;&lt;&lt;endl;
        return ;
    &#125; //查不到不打印
    vector&lt;Zt&gt; w=train[checitotrain[a]].getzt();
    for(auto po=w.begin();po!=w.end();po++)
    &#123;
        cout&lt;&lt;station[natosta[po-&gt;getsta()]].getname()&lt;&lt;&#39; &#39;;
        if(po!=w.begin()&amp;&amp;po!=w.end()-1)
        &#123;
            po-&gt;print();
           //cout&lt;&lt; po-&gt;getleave().first&lt;&lt;&#39; &#39;&lt;&lt;po-&gt;getleave().first;
        &#125;
          else if(po==w.begin())
          &#123;
               cout&lt;&lt; po-&gt;getleave().first&lt;&lt;&#39; &#39;&lt;&lt;po-&gt;getleave().first;
          &#125;
          else   cout&lt;&lt;po-&gt;getarrive().first&lt;&lt;&#39; &#39;&lt;&lt; po-&gt;getarrive().second&lt;&lt;&#39; &#39;;
    &#125;
    cout&lt;&lt;endl;
&#125;
bool Baseque :: cxyp(string a,string b,int riqi)
&#123;
    auto w=station[natosta[a]].quecheci();
    auto v=station[natosta[b]].quecheci(); //vector&lt;pair&lt;string,int&gt;&gt; checi
    set&lt;piao&gt;tem;
    vector&lt;piao&gt;temp;
    temp.clear();
    for(auto po=w.begin();po!=w.end();po++) tem.insert(*po);
    for(auto po=v.begin();po!=v.end();po++)
    &#123;
        if(tem.insert(*po).second==0) temp.push_back(*po);
    &#125;
    if(temp.size()==0)
    &#123;
        cout&lt;&lt;&quot;No ticket&quot;&lt;&lt;endl;
        return 0 ;
    &#125;
    for(auto po=temp.begin();po!=temp.end();po++)
    &#123;
       auto x= train[checitotrain[po-&gt;name]].getzt();
       int mini=po-&gt;sum[riqi];
       int ss=train[checitotrain[po-&gt;name]].cxyp(a,b,riqi);
       mini=min(mini,ss);
       cout&lt;&lt;train[checitotrain[po-&gt;name]].gettr()&lt;&lt;endl;;
       for(auto pi=x.begin();pi!=x.end();pi++) //336
       &#123;
            //cout&lt;&lt;s
            pi-&gt;print();
       &#125;
       cout&lt;&lt;mini&lt;&lt;endl;
    &#125;
    return 1;
&#125;
void Baseque::load()
 &#123;
     int x,y,n;
    ifstream in1(&quot;station.txt&quot;,ios::in);
    in1&gt;&gt;n;
     while(    n--)
     &#123;
              Station tem1;
          in1&gt;&gt;tem1;
            //      cout&lt;&lt;-1; 手动调试点
         if(tem1.getname()==&quot;$$&quot;) continue;
         station.push_back(tem1);
         natosta.insert(make_pair(tem1.getname(),station.size()-1));
     //    cout&lt;&lt;1;

     &#125;
     in1.close();
     ifstream in2(&quot;train.txt&quot;,ios::in);

     in2&gt;&gt;n;
       while(n--   )
    &#123;
             Train tem2;
         in2&gt;&gt;tem2;
                // cout&lt;&lt;-2;  //手动调试点

         if(tem2.gettr()==&quot;$$&quot;) continue;
         train.push_back(tem2);
         checitotrain.insert(make_pair(tem2.gettr(),train.size()-1));
    &#125;
    in2.close();
&#125;
void Baseque::save()
 &#123;
  ofstream out1(&quot;station.txt&quot;,ios::out);
  out1&lt;&lt;station.size()&lt;&lt;endl;
     for(auto po=station.begin();po!=station.end();po++)
        out1&lt;&lt;*po&lt;&lt;endl;
    out1.close();
    ofstream out2(&quot;train.txt&quot;,ios::out);
    out2&lt;&lt;train.size()&lt;&lt;endl;
     for(auto po=train.begin();po!=train.end();po++)
        out2&lt;&lt;*po&lt;&lt;endl;
        out2.close();
 &#125;
 /*
int main()
&#123;
    Baseque demo;
    cin&gt;&gt;demo;
    cout&lt;&lt;demo;
&#125;
*/
/*
int main()
&#123;
    Baseque demo;
    string a;
    int c;
    int b;
    cin&gt;&gt;a&gt;&gt;b&gt;&gt;c;
    demo.czcc(a,b,c);
    cin&gt;&gt;a&gt;&gt;b&gt;&gt;c; //一天分四个时段查询。5就查不到
    demo.czcc(a,b,c);
&#125;*/
/*
int main()
&#123;
    Baseque demo;
    string a;
    int c;
    int b;
    cin&gt;&gt;a;//&gt;&gt;b&gt;&gt;c;
    demo.cxcx(a);
    cin&gt;&gt;a;//&gt;&gt;b&gt;&gt;c;
    demo.cxcx(a);
&#125;
*/
/*
int main()
&#123;
    Baseque demo;
    string a,b;
    cin&gt;&gt;a&gt;&gt;b;
    demo.cxyp(a,b);
&#125;
*/
/*
int main()
&#123;
    Baseque demo;
&#125;*/
class Client:public Baseque
&#123;
protected:
    vector&lt;User&gt; user;
    map&lt;string,int&gt; idtouse;
    vector&lt;Tick&gt;tick;
    map&lt;string,int&gt; hashtotick;
    int now;//用于记录当前用户
    string now2;
public:
        Client()&#123;load2();&#125;
    void load2();
    void save2();
    bool buytic(string a,string b,int c);
    void reback();
    void replacetic();
    virtual void login();
    void setphone(string a);
    void printmp();
    ~Client()&#123;save2();&#125;
&#125;;
 void Client::printmp()
 &#123;
    auto ww=user[now].gettic();
    for(auto po=ww.begin();po!=ww.end();po++)
    &#123;
        cout&lt;&lt;po-ww.begin()+1&lt;&lt;endl;
       tick[ hashtotick[*po]].print();
    &#125;
 &#125;
bool Client::buytic(string a,string b,int c) //先查后买，查不到不能买。
&#123;
    if(!(cxyp(a,b,c)))&#123;cout&lt;&lt;&quot;无票&quot;&lt;&lt;endl;return 0;&#125;
    if(user[now].getboupiao()&gt;5||user[now].getban())
    &#123;
        cout&lt;&lt;&quot;购票限制&quot;&lt;&lt;endl;
        return 0;
    &#125;
   else
    &#123;
        string id;
        cin&gt;&gt;id;
        pair&lt;int,int&gt;www=train[checitotrain[id]].buytic(a,b,c);
        station[natosta[a]].buytic(a,c);
        Time no1,no2;
        no1.loadtime();
        no2.loadtime();
        no2.seth(www.first,www.second);
        if(no2.getday()&lt;c) no2.setmonth(no2.getmonth()+1);
        Tick tem(no1,no2,a,b,now2,id);
        tick.push_back(tem);
        hashtotick.insert(make_pair(tem.getname(),tick.size()-1));
        user[now].buytic(tem.getname());
    &#125;
    return 1;
&#125;
void Client::reback() //先查后买，查不到不能买。
&#123;
        printmp();
        string id=now2;
        int n;
        cout&lt;&lt;&quot;退哪一张票&quot;&lt;&lt;endl;
        cin&gt;&gt;n;
        n=n-1;
    auto ww=user[now].gettic();
 string a=tick[ hashtotick[ww[n]]].getfrom();
         cout&lt;&lt;1&lt;&lt;endl;;
      string b=tick[ hashtotick[ww[n]]].getto();
         cout&lt;&lt;2&lt;&lt;endl;;
       int c=tick[ hashtotick[ww[n]]].getlea().getday();
         cout&lt;&lt;3&lt;&lt;endl;;
        train[checitotrain[id]].reback(a,b,c);
        cout&lt;&lt;4&lt;&lt;endl;;
         string e=tick[ hashtotick[ww[n]]].getna();
       station[natosta[a]].rebac(e,c);
        cout&lt;&lt;5&lt;&lt;endl;;
     // tick.erase(hashtotick[ww[n]]+tick.begin());

&#125;
void Client::replacetic()
&#123;
    string a,b,id;
    int c;
    cin&gt;&gt;a&gt;&gt;b&gt;&gt;c;
  if(  buytic(a,b,c))
   &#123;
        cin&gt;&gt;a&gt;&gt;b&gt;&gt;c;
        reback();
   &#125;
&#125;
void Client::setphone(string a)
&#123;
    user[now].setph(a);
&#125;
void Client::login()
&#123;
    string phone;
    string key;
    while(cin&gt;&gt;phone&gt;&gt;key)
    &#123;
           for(auto po=user.begin();po!=user.end();po++)
           &#123;
               if(po-&gt;getphone()==phone)
                   if(po-&gt;getkey()==key)
                    &#123;
                        cout&lt;&lt;&quot;Login prosperity&quot;&lt;&lt;endl;
                        now=po-user.begin();
                        now2=po-&gt;getid();
                        return ;
                    &#125;
           &#125;
           cout&lt;&lt;&quot;Wrong password&quot;&lt;&lt;endl;
    &#125;
&#125;
void Client::load2()
&#123;
    ifstream in(&quot;user.txt&quot;,ios::in);
    int n;
    if(!in) return ;
    in&gt;&gt;n;
    while(n--)
    &#123;
        User tem;
        in&gt;&gt;tem;
        user.push_back(tem);
        idtouse.insert(make_pair(tem.getname(),user.size()-1));
    &#125;
    in.close();
    ifstream in2(&quot;tick.txt&quot;,ios::in);
    if(!in2) return ;
    in2&gt;&gt;n;
    while(n--)
    &#123;
        Tick tem;
        in2&gt;&gt;tem;
        if(tem.getname()==&quot;$$$&quot;) continue;
        tick.push_back(tem);
        hashtotick.insert(make_pair(tem.getname(),tick.size()-1));
    &#125;
    in.close();
&#125;
void Client::save2()
&#123;
    ofstream out(&quot;user.txt&quot;,ios::out);
    out&lt;&lt;user.size()&lt;&lt;endl;
    for(auto po=user.begin();po!=user.end();po++) out&lt;&lt;*po&lt;&lt;endl;
    out.close();
    ofstream out2(&quot;tick.txt&quot;,ios::out);
    stringstream sss;
    Time now;
    now.loadtime();
    string temp;
    sss&lt;&lt;now.getyear()&lt;&lt;&quot;年&quot;&lt;&lt;now.getmonth()&lt;&lt;&quot;月&quot;&lt;&lt;now.getday()&lt;&lt;&quot;日&quot;;
    sss&gt;&gt;temp;
    ofstream out3(temp,ios::out);   //做过的车，就存到日志文件不在读取。
    int sum=0;
    for(auto po=tick.begin();po!=tick.end();po++)
    &#123;
        if(now&gt;po-&gt;getlea())
        &#123;
            out3&lt;&lt;*po&lt;&lt;endl;
        &#125;
        else sum++;
    &#125;
    out3.close();
    out2&lt;&lt;sum&lt;&lt;endl;
    for(auto po=tick.begin();po!=tick.end();po++)
    &#123;
        if(now&gt;po-&gt;getlea()) continue;
        out2&lt;&lt;*po&lt;&lt;endl;
    &#125;
    out2.close();
&#125;
/*
int main()
&#123;
    Client demo;
    //demo.login();
&#125;*/

/*int main()
&#123;
    Client demo;
    demo.login();//登陆密码18053176044 123456
    string a,b;
    int riqi;
    cin&gt;&gt;a&gt;&gt;b&gt;&gt;riqi;
    demo.buytic(a,b,riqi);
    demo.cxyp(a,b,riqi);
&#125;*/
/*
int main()
&#123;
    Client demo;
    demo.login();
    string a,b;
    int riqi;
    cin&gt;&gt;a&gt;&gt;b&gt;&gt;riqi;
    demo.buytic(a,b,riqi);
    demo.reback();
    demo.cxyp(a,b,riqi);
&#125;*/
class Admin:public Client
&#123;
public:
    void login()&#123;&#125;
    void insertsta();
    bool delsta(string a);
    void setsta(string a);
    void inserttr();
    bool deltr(string a);
    void settr(string a);
&#125;;
void Admin:: insertsta()
&#123;
    Station tem1;
    cin&gt;&gt;tem1;
    station.push_back(tem1);
    natosta.insert(make_pair(tem1.getname(),station.size()-1));
&#125;
bool Admin::delsta(string a)
&#123;
    for(auto po=station.begin();po!=station.end();po++)
    if(po-&gt;getname()==a)
    &#123;
        vector&lt;piao&gt; ww=po-&gt;quecheci();
        for(auto pi=ww.begin();pi!=ww.end();pi++)
            train[checitotrain[pi-&gt;name]].del(a);
        station.erase(po);
        return 1;
    &#125;
    cout&lt;&lt;&quot;无此车站&quot;&lt;&lt;endl;
    return 0;
&#125;
void Admin::setsta(string a)
&#123;
    if(!delsta(a))return ;
    insertsta();
    return ;
&#125;
void Admin::inserttr()
&#123;
    Train tem2;
    cin&gt;&gt;tem2;
    train.push_back(tem2);
    checitotrain.insert(make_pair(tem2.gettr(),train.size()-1));
    return ;
&#125;
bool Admin::deltr(string a)
&#123;
    for(auto po=train.begin();po!=train.end();po++)
    if(po-&gt;gettr()==a)
    &#123;
        vector&lt;Zt&gt; ww=po-&gt;getzt();
        for(auto pi=ww.begin();pi!=ww.end();pi++)
            station[natosta[pi-&gt;getsta()]].del(a);
        train.erase(po);
                return 1;
    &#125;
    cout&lt;&lt;&quot;无此高铁&quot;&lt;&lt;endl;
    return 0;
&#125;
void Admin::settr(string a)
&#123;
    if(!deltr(a))return ;
    inserttr();
&#125;
/*
int main()
&#123;
    Admin demo;
    demo.insertsta();
    string a;
    cin&gt;&gt;a;
    demo.delsta(a);
  //  cout&lt;&lt;1&lt;&lt;endl;
    demo.insertsta();
    cin&gt;&gt;a;
    demo.setsta(a);
   // cout&lt;&lt;2&lt;&lt;endl;
&#125;*/
/*
int main()
&#123;
    Admin demo;
    demo.inserttr();
&#125;*/
/*
int main()
&#123;
    Admin demo;
    demo.inserttr();
     string a;
    cin&gt;&gt;a;
    demo.deltr(a);
&#125;*/
/*
int main()
&#123;
    Admin demo;
    demo.inserttr();
    string a;
    cin&gt;&gt;a;
    demo.settr(a);
 //   cout&lt;&lt;2&lt;&lt;endl;
&#125;
*/
</code></pre>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/C-C%E8%AF%AD%E8%A8%80/" class="category-chain-item">C++&amp;C语言</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>『C++&amp;C语言』C++课程设计详解-12306的模拟实现</div>
      <div>https://chiamzhang.github.io/2024/06/29/『C++&amp;C语言』C++课程设计详解-12306的模拟实现/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>Chiam</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>June 29, 2024</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2024/06/29/%E3%80%8EC++&amp;C%E8%AF%AD%E8%A8%80%E3%80%8FC++%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1%EF%BC%8C12306%E6%A8%A1%E6%8B%9F%E5%86%99%E8%B5%B7%E6%9D%A5%E5%B0%B1%E6%98%AF%E8%BF%99%E4%B9%88%E7%B2%97%E6%9A%B4/" title="『C++&amp;C语言』C++课程设计，12306模拟写起来就是这么粗暴">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">『C++&amp;C语言』C++课程设计，12306模拟写起来就是这么粗暴</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2024/06/29/%E3%80%8EC++&amp;C%E8%AF%AD%E8%A8%80%E3%80%8FC++%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E7%B3%BB%E7%BB%9F%E6%97%B6%E9%97%B4%E5%B9%B6%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%87%BA/" title="『C++&amp;C语言』C++获取当前系统时间并格式化输出">
                        <span class="hidden-mobile">『C++&amp;C语言』C++获取当前系统时间并格式化输出</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://lib.baomitu.com/valine/1.5.1/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"fIfc7WqUDZohlQuPc2lz5mJy-MdYXbMMI","appKey":"zjlAG3ZA3o4cBHVAkjzc2Z20","path":"window.location.pathname","placeholder":"留言仅限讨论，禁止广告等行为","avatar":"retro","meta":["nick","mail","link"],"requiredFields":[],"pageSize":10,"lang":"zh-CN","highlight":false,"recordIP":false,"serverURLs":"https://fifc7wqu.api.lncldglobal.com","emojiCDN":null,"emojiMaps":null,"enableQQ":false},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          var imgSelector = '#valine .vcontent img:not(.vemoji)';
          Fluid.plugins.imageCaption(imgSelector);
          Fluid.plugins.fancyBox(imgSelector);
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>Table of Contents</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <meta name="referrer" content="no-referrer" /> <footer id="footer" role="contentinfo"> <meta name="referrer" content="no-referrer" /> <div class="divider"> <div class="wall"></div> <img class="animals" src="/img/footer_animals_new.png" srcset="/img/loading.gif" lazyload alt="Footer Animals"> </div> <div class="container" data-index="450"> <p> <a href="https://chiamzhang.github.io" target="_blank">DogEgg</a> <i class="iconfont icon-love"></i> <a href="#" target="_blank">LittePig</a> </p> <p> Powered by  <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-pen"></i> Theme  <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> </p> </div> </footer> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>




  
<script src="/js/love.js"></script>
<script src="/js/funnyTitle.js"></script>
<script src="/js/backTop.js"></script>
<script src="//cdn.jsdelivr.net/gh/bynotes/texiao/source/js/xiaoxuehua.js"></script>



<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>
